# ==========================================
# 1. 기본 설정 (General)
# ==========================================

# Prefix 키 변경: Ctrl+b -> Ctrl+a
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# 인덱스 설정: 0번 대신 1번부터 시작 (키보드 1번이 누르기 편함)
set -g base-index 1
setw -g pane-base-index 1

# 마우스 사용 활성화 (창 크기 조절, 스크롤 등)
set -g mouse on

# 창 이름 자동 변경 방지 (내가 지은 이름 유지)
set-option -g allow-rename off

# 세션 종료 시 Tmux가 닫히지 않고 다른 세션으로 이동
set -g detach-on-destroy off

# 히스토리 제한 늘리기 (기본 2000줄은 너무 적음)
set -g history-limit 50000


# ==========================================
# 2. 성능 및 호환성 (Neovim & Alacritty)
# ==========================================

# ESC 키 딜레이 제거 (Vim 모드 전환 반응속도 향상)
set -s escape-time 0

# 외부 파일 변경 감지 (autoread)
set -g focus-events on

# Alacritty True Color 지원 (색감 보정)
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Tmux 실행 시 상태바(Status Bar) 숨기기
set -g status off

# ==========================================
# 3. 키 바인딩 (Key Bindings)
# ==========================================
bind h split-window -h
bind v split-window -v
bind a set-option status
bind x kill-pane
unbind '"'
unbind %


# ==========================================
# 4. 복사 모드 (Copy Mode & Clipboard)
# ==========================================

# 복사 모드에서 Vim 키바인딩 사용
setw -g mode-keys vi

# 선택 모드 진입: Prefix + [
# 선택 시작: v (Vim처럼)
bind-key -T copy-mode-vi v send-keys -X begin-selection

# 선택 복사: y (Vim처럼) -> 맥 클립보드로 복사
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# 마우스 드래그 끝났을 때 자동으로 맥 클립보드로 복사
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"


# ==========================================
# 5. 상태 표시줄 (Status Bar)
# ==========================================
set -g status-bg black
set -g status-fg white
set -g status-left '[#S] '
set -g status-right '#H | %Y-%m-%d %H:%M'
